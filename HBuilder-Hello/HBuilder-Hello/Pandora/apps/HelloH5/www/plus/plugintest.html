<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="initial-scale = 1.0, maximum-scale=1.0, user-scalable=no"/>
        <meta name="HandheldFriendly" content="true"/>
        <meta name="MobileOptimized" content="320"/>
        <title>H5Plugin</title>
        <script type="text/javascript" src="/static/css/default/img/default.jpg" data-original="./js/common.js"></script>
        <script type="text/javascript" src="/static/css/default/img/default.jpg" data-original="./js/test.js"></script>
        <script type="text/javascript">
            document.addEventListener( "plusready",  function()
            {
                 // 声明的JS“扩展插件别名”
                 var _BARCODE = 'plugintest',
                 B = window.plus.bridge;
                 var plugintest =
                 {
                     // 声明异步返回方法
                     PluginTestFunction : function (Argus1, Argus2, Argus3, Argus4, successCallback, errorCallback )
                     {
                          var success = typeof successCallback !== 'function' ? null : function(args)
                          {
                             successCallback(args);
                          },
                          fail = typeof errorCallback !== 'function' ? null : function(code)
                          {
                              errorCallback(code);
                          };
                          callbackID = B.callbackId(success, fail);
                              // 通知Native层plugintest扩展插件运行”PluginTestFunction”方法
                        return B.exec(_BARCODE, "PluginTestFunction", [callbackID, Argus1, Argus2, Argus3, Argus4]);
                    },
                                      
                    PluginTestFunctionArrayArgu : function (Argus, successCallback, errorCallback )
                    {
                       var success = typeof successCallback !== 'function' ? null : function(args)
                       {
                          successCallback(args);
                       },
                       fail = typeof errorCallback !== 'function' ? null : function(code)
                       {
                          errorCallback(code);
                       };
                           callbackID = B.callbackId(success, fail);
                       return B.exec(_BARCODE, "PluginTestFunctionArrayArgu", [callbackID, Argus]);
                    },
                                      
                    // 声明同步返回方法
                    PluginTestFunctionSync : function (Argus1, Argus2, Argus3, Argus4)
                    {
                       // 通知Native层plugintest扩展插件运行“PluginTestFunctionSync”方法并同步返回结果
                       return B.execSync(_BARCODE, "PluginTestFunctionSync", [Argus1, Argus2, Argus3, Argus4]);
                    },
                    PluginTestFunctionSyncArrayArgu : function (Argus)
                    {
                        return B.execSync(_BARCODE, "PluginTestFunctionSyncArrayArgu", [Argus]);
                     }
                };
                window.plus.plugintest = plugintest;
            }, true );

        function pluginShow() {
            plus.plugintest.PluginTestFunction("Html5","Plus","AsyncFunction","MultiArgument!",
                function(result) {
                     // 成功返回的结果
                     alert( result[0]  + "_" + result[1]  + "_" + result[2]  + "_" + result[3] );
                },function(result){
                     // 失败返回的结果
                     alert(result)
                });
            }

        function pluginShowArrayArgu() {
            plus.plugintest.PluginTestFunctionArrayArgu( ["Html5","Plus","AsyncFunction","ArrayArgument!"], function( result ) {alert( result );},function(result){alert(result)});
        }

        function pluginGetString()
        {
            alert(plus.plugintest.PluginTestFunctionSync("Html5","Plus","SyncFunction","MultiArgument!"));
        }

        function pluginGetStringArrayArgu()
        {
        var Argus                                    = plus.plugintest.PluginTestFunctionSyncArrayArgu(["Html5","Plus","SyncFunction","ArrayArgument!"]);
            alert( Argus.RetArgu1 + "_" +  Argus.RetArgu2 + "_" + Argus.RetArgu3  + "_" + Argus.RetArgu4 );
        }

            </script>
        <link rel="stylesheet" href="./css/common.css" type="text/css" charset="utf-8"/>
    </head>
    <body>
        <header>
            <div class="nvbt" onclick="back();"><div class="iback"></div></div>
            <div class="nvtt">PluginTest</div>
        </header>
        <div id="dcontent" class="dcontent">
            <br/>
            <div class="button" onclick="pluginShow()">PluginTestFunction()</div>
            <div class="button" onclick="pluginShowArrayArgu()">PluginTestFunctionArrayArgu()</div>
            <div class="button" onclick="pluginGetString()">PluginTestFunctionSync()</div>
            <div class="button" onclick="pluginGetStringArrayArgu()">PluginTestFunctionSyncArrayArgu()</div>
            <br/>
        </div>
    </body>
</html>